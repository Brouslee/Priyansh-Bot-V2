const schedule = require('node-schedule');
const moment = require('moment-timezone');
const chalk = require('chalk');

module.exports.config = {
    name: 'autosent',
    version: '10.0.0',
    hasPermssion: 0,
    credits: '๐๐ซ๐ข๐ฒ๐๐ง๐ฌ๐ก ๐๐๐ฃ๐ฉ๐ฎ๐ญ',
    description: 'ุจุนุฏ ุถุจุทูุ ุณูููู ุจุฅุฑุณุงู ุงูุฑุณุงุฆู ุชููุงุฆููุง ูู ุฃููุงุช ูุญุฏุฏุฉ',
    commandCategory: 'ุฑุณุงุฆู ุงููุฌููุนุฉ',
    usages: '[]',
    cooldowns: 3
};

const messages = [
    { time: '12:00 AM', message: 'โโโโ โข๐โข โโโโ ุงูุขู ุงูุณุงุนุฉ 12:00 ุตุจุงุญูุง โณ ููุช ุงูููู ูุง ุทููุ ุชุตุจุญ ุนูู ุฎูุฑ ๐ฅ โโโโ โข๐โข โโโโ' },
    { time: '1:00 AM', message: 'โโโโ โข๐โข โโโโ ุงูุขู ุงูุณุงุนุฉ 1:00 ุตุจุงุญูุง โณ ุฃูุชู ูู ูุญุฏู ๐ โโโโ โข๐โข โโโโ' },
    { time: '2:00 AM', message: 'โโโโ โข๐โข โโโโ ุงูุขู ุงูุณุงุนุฉ 2:00 ุตุจุงุญูุง โณ ูุณู ูุง ููุชูุ ๐ณ โโโโ โข๐โข โโโโ' },
    { time: '3:00 AM', message: 'โโโโ โข๐โข โโโโ ุงูุขู ุงูุณุงุนุฉ 3:00 ุตุจุงุญูุง โณ ุฃุชููู ุฃู ุชุฃุชููู ุงููุนุงุณ ๐ โโโโ โข๐โข โโโโ' },
    { time: '4:00 AM', message: 'โโโโ โข๐โข โโโโ ุงูุขู ุงูุณุงุนุฉ 4:00 ุตุจุงุญูุง โณ ุงูููู ุฌุงูุ ๐ โโโโ โข๐โข โโโโ' },
    { time: '5:00 AM', message: 'โโโโ โข๐โข โโโโ ุงูุขู ุงูุณุงุนุฉ 5:00 ุตุจุงุญูุง โณ ูุณูู ๐น โโโโ โข๐โข โโโโ' },
    { time: '6:00 AM', message: 'โโโโ โข๐โข โโโโ ุงูุขู ุงูุณุงุนุฉ 6:00 ุตุจุงุญูุง โณ ุงูุณูุงู ุนูููู โค๏ธ๐ฅ ๐ โโโโ โข๐โข โโโโ' },
    { time: '7:00 AM', message: 'โโโโ โข๐โข โโโโ ุงูุขู ุงูุณุงุนุฉ 7:00 ุตุจุงุญูุง โณ ุงุตุญู ุญุงูุงู ๐ฅฐ โโโโ โข๐โข โโโโ' },
    { time: '8:00 AM', message: 'โโโโ โข๐โข โโโโ ุงูุขู ุงูุณุงุนุฉ 8:00 ุตุจุงุญูุง โณ ูู ุงุณุชููุธุช ูุง ุญุถุฑุฉ ุงูุฑุฆูุณุ ๐ต โโโโ โข๐โข โโโโ' },
    { time: '9:00 AM', message: 'โโโโ โข๐โข โโโโ ุงูุขู ุงูุณุงุนุฉ 9:00 ุตุจุงุญูุง โณ ุชูุงูู ุงูุฅูุทุงุฑ ุญุงููุง ูุง ุทูู ๐ โโโโ โข๐โข โโโโ' },
    { time: '10:00 AM', message: 'โโโโ โข๐โข โโโโ ุงูุขู ุงูุณุงุนุฉ 10:00 ุตุจุงุญูุง โณ ูุณููุ ูุง ุฑุญุช ุงูุฌุงูุนุฉ ุงููููุ ๐ โโโโ โข๐โข โโโโ' },
    { time: '11:00 PM', message: 'โโโโ โข๐โข โโโโ ุงูุขู ุงูุณุงุนุฉ 11:00 ุตุจุงุญูุง โณ ูุง ุชูุณุงูู ๐ป โโโโ โข๐โข โโโโ' },
    { time: '12:00 PM', message: 'โโโโ โข๐โข โโโโ ุงูุขู ุงูุณุงุนุฉ 12:00 ุธูุฑูุง โณ ุทุงุจุช ุธูุฑุชูู ุฌููุนูุง ๐ ุงูุฌู ุญุฑ ุฌุฏูุง ๐ฅต โโโโ โข๐โข โโโโ' },
    { time: '1:00 PM', message: 'โโโโ โข๐โข โโโโ ุงูุขู ุงูุณุงุนุฉ 1:00 ุธูุฑูุง โณ ุชูุงูู ุงูุบุฏุงุก ุญุงูุงู ๐ โโโโ โข๐โข โโโโ' },
    { time: '2:00 PM', message: 'โโโโ โข๐โข โโโโ ุงูุขู ุงูุณุงุนุฉ 2:00 ุธูุฑูุง โณ ููููุง: ุฌุงู ุดุฑู ุฑุงู ๐๐ โโโโ โข๐โข โโโโ' },
    { time: '3:00 PM', message: 'โโโโ โข๐โข โโโโ ุงูุขู ุงูุณุงุนุฉ 3:00 ุนุตุฑูุง โณ ุฎุฐ ูุณุทูุง ูู ุงูุฑุงุญุฉ ุงูุขู ๐ โโโโ โข๐โข โโโโ' },
    { time: '4:00 PM', message: 'โโโโ โข๐โข โโโโ ุงูุขู ุงูุณุงุนุฉ 4:00 ุนุตุฑูุง โณ ุงูุฌู ุญุงุฑ ุฌุฏูุง ุงูููู ๐ฅต โโโโ โข๐โข โโโโ' },
    { time: '5:00 PM', message: 'โโโโ โข๐โข โโโโ ุงูุขู ุงูุณุงุนุฉ 5:00 ูุณุงุกู โณ ูู ุณุนูุฏูุง ุฏุงุฆููุง ูููุง ูุงู ุงูุญุงู ๐ โโโโ โข๐โข โโโโ' },
    { time: '6:00 PM', message: 'โโโโ โข๐โข โโโโ ุงูุขู ุงูุณุงุนุฉ 6:00 ูุณุงุกู โณ ููููุง: ุณูููุงุชูู ุฏูุฑูู ูู ุงูุทุฑูู ๐ โโโโ โข๐โข โโโโ' },
    { time: '7:00 PM', message: 'โโโโ โข๐โข โโโโ ุงูุขู ุงูุณุงุนุฉ 7:00 ูุณุงุกู โณ ุงูุณุนุงุฏุฉ ูุนุฏู ูู ๐ โโโโ โข๐โข โโโโ' },
    { time: '8:00 PM', message: 'โโโโ โข๐โข โโโโ ุงูุขู ุงูุณุงุนุฉ 8:00 ูุณุงุกู โณ ุงูุนุดุงุก ุงูุขู ููุฌููุน ๐ โโโโ โข๐โข โโโโ' },
    { time: '9:00 PM', message: 'โโโโ โข๐โข โโโโ ุงูุขู ุงูุณุงุนุฉ 9:00 ูุณุงุกู โณ ูุทููู ุงููุทูู ๐ โโโโ โข๐โข โโโโ' },
    { time: '10:00 PM', message: 'โโโโ โข๐โข โโโโ ุงูุขู ุงูุณุงุนุฉ 10:00 ูุณุงุกู โณ ุงุจุชุณูุ ูุงุถุญู ุฏูููุง โบ๏ธ โโโโ โข๐โข โโโโ' },
    { time: '11:00 PM', message: 'โโโโ โข๐โข โโโโ ุงูุขู ุงูุณุงุนุฉ 11:00 ูุณุงุกู โณ ูู ุชูุงููุช ุงูุนุดุงุกุ โโโโ โข๐โข โโโโ' }
];

module.exports.onLoad = ({ api }) => {
    console.log(chalk.bold.hex("#00c300")("============ ุชู ุชุญููู ุฃูุฑ ุงูุฅุฑุณุงู ุงูุชููุงุฆู ุจูุฌุงุญ ============"));

    messages.forEach(({ time, message }) => {
        const [hour, minute, period] = time.split(/[: ]/);
        let hour24 = parseInt(hour, 10);
        if (period === 'PM' && hour !== '12') {
            hour24 += 12;
        } else if (period === 'AM' && hour === '12') {
            hour24 = 0;
        }

        const scheduledTime = moment.tz({ hour: hour24, minute: parseInt(minute, 10) }, 'Africa/Libya).toDate();

        schedule.scheduleJob(scheduledTime, () => {
            global.data.allThreadID.forEach(threadID => {
                api.sendMessage(message, threadID, (error) => {
                    if (error) {
                        console.error(`ูุดู ุฅุฑุณุงู ุงูุฑุณุงูุฉ ุฅูู ${threadID}:`, error);
                    }
                });
            });
        });
    });
};

module.exports.run = () => {
    // ูุฐู ุงูุฏุงูุฉ ุชูุชุฑู ูุงุฑุบุฉ ูุฃู ุงูููุทู ุงูุฃุณุงุณู ูุชู ุชูููุฐู ุฏุงุฎู onLoad
};